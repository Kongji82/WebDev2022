# Redis
프로젝트를 진행하면서 빠른 데이터 통신을 요구했던 적이 있다. 그 당시 상황으로는 AWS RDS를 외장DB를 사용하고 있었기에 통신에서 빠른 작업을 요구하는 작업은 그때의 나로서는 힘들었다. 선배들에게 조언을 구하고 찾아보는 결과 데이터 통신 작업을 하기 위해 Redis를 이용한다는 것을 찾았다.  
레디스는 REmote DIctionary Server 의 약자다. 레디스는 시스템 메모리를 사용하는 키-값 데이터 스토어이다. 인메모리 상태에서 데이터를 처리함으로써 흔히 사용하는 **관계형 데이터베이스**(RDS) 그리고 **몽고 DB**로 대표되는 문서형(Document) 데이터베이스보다도 빠르게 작동한다.

## 레디스를 왜 쓸까?
DB가 있음에도 레디스를 사용하는 이유가 있다.  
데이터 베이스는 데이터를 물리 디스크에 직접 쓰기 때문에 서버에 문제가 발생하여 다운되더라도 데이터가 손실되지 않는다. 하지만 매번 디스크에 접근해야 하기 때문에 사용자가 많아질수록 부하가 많아져서 느려질 수 있다. 

일반적으로 서비스 운영 초반이거나 규모가 작은, 사용자가 많지 않은 서비스의 경우에는 WEB - WAS - DB 의 구조로도 데이터 베이스에 무리가 가지 않는다.

하지만 사용자가 늘어난다면 데이터 베이스가 과부하 될 수 있기 때문에 이때 캐시 서버를 도입하여 사용.
그리고 이 캐시 서버로 이용할 수 있는 것이 바로 Redis이다.
캐시는 한번 읽어온 데이터를 임의의 공간에 저장하여 다음에 읽을 때는 빠르게 결괏값을 받을 수 있도록 도와주는 공간.
같은 요청이 여러 번 들어오는 경우 매번 데이터 베이스를 거치는 것이 아니라 캐시 서버에서 첫 번째 요청 이후 저장된 결괏값을 바로 내려주기 때문에 DB의 부하를 줄이고 서비스의 속도도 느려지지 않는 장점이 있다.

## 레디스 자료구조
레디스가 다른 In-Memory 데이터베이스와의 가장 큰 차이점은 큰 차이점은 다양한 자료구조 를 지원한다는 것이다. 레디스는 기본적으로 String, Bitmap, Hash, List, Set, Sorted Set 를 제공했고, 버전이 올라가면서 현재는 Geospatial Index, Hyperloglog, Stream 등의 자료형도 지원하고 있다. 레디스는 다양한 자료구조를 제공함으로 개발의 편의성 증대와 난이도를 더욱 쉽게 해준다.

### String
레디스의 string은 키와 연결할 수 있는 가장 간단한 유형의 값이다. 레디스의 키가 문자열이므로 이 구조는 문자열을 다른 문자열에 매핑하는 것이라고 볼 수 있다.  
string 타입에는 모든 종류의 문자열(이진 데이터 포함) 을 저장할 수 있다. 따라서 JPEG 이미지를 저장하거나, HTML fragment 를 캐시하는 용도로 자주 사용한다. 저장할 수 있는 최대 사이즈는 512MB이다. string은 가장 기본적인 자료구조이기 때문에 다음과 같은 다양한 기능을 제공한다.
- string을 정수로 파싱하고, 이를 atomic하게 증감하는 커맨드
``` terminal
> set counter 100
OK

> incr counter
(integer) 101

> incr counter
(integer) 102

f> incrby counter 50
(integer) 152
```



## Reference
https://wildeveloperetrain.tistory.com/21  
https://brunch.co.kr/@skykamja24/575
https://meetup.toast.com/posts/224